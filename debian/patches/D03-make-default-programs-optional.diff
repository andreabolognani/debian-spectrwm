Description: Make default programs optional
 Non-optional default programs are validated on startup.
 .
 To avoid adding more dependencies, mark all default programs
 except dmenu as optional.
Forwarded: not-needed
Author: Andrea Bolognani <eof@kiyuko.org>
Last-Update: 2016-07-16
Index: spectrwm.git/spectrwm.c
===================================================================
--- spectrwm.git.orig/spectrwm.c
+++ spectrwm.git/spectrwm.c
@@ -7876,11 +7876,6 @@ validate_spawns(void)
 void
 setup_spawn(void)
 {
-	setconfspawn("lock",		"slock",		0);
-
-	setconfspawn("term",		"x-terminal-emulator",	0);
-	setconfspawn("spawn_term",	"x-terminal-emulator",	0);
-
 	setconfspawn("menu",		"dmenu_run"
 					" $dmenu_bottom"
 					" -fn $bar_font"
@@ -7908,6 +7903,9 @@ setup_spawn(void)
 					" -sf $bar_color",	0);
 
 	 /* These are not verified for existence, even with a binding set. */
+	setconfspawn("lock",		"slock",		SWM_SPAWN_OPTIONAL);
+	setconfspawn("term",		"x-terminal-emulator",	SWM_SPAWN_OPTIONAL);
+	setconfspawn("spawn_term",	"x-terminal-emulator",	SWM_SPAWN_OPTIONAL);
 	setconfspawn("screenshot_all",	"screenshot.sh full",	SWM_SPAWN_OPTIONAL);
 	setconfspawn("screenshot_wind",	"screenshot.sh window",	SWM_SPAWN_OPTIONAL);
 	setconfspawn("initscr",		"initscreen.sh",	SWM_SPAWN_OPTIONAL);
Index: spectrwm.git/spectrwm.1
===================================================================
--- spectrwm.git.orig/spectrwm.1
+++ spectrwm.git/spectrwm.1
@@ -563,13 +563,13 @@ bind[] = MOD+Shift+b
 .Pp
 Default programs:
 .Bl -tag -width "screenshot_wind" -offset indent -compact
-.It Cm lock
-slock
 .It Cm menu
 dmenu_run $dmenu_bottom \-fn $bar_font \-nb $bar_color \-nf $bar_font_color \-sb
 $bar_border \-sf $bar_color
+.It Cm lock
+slock                # optional
 .It Cm term
-x\-terminal\-emulator
+x\-terminal\-emulator  # optional
 .It Cm initscr
 initscreen.sh        # optional
 .It Cm screenshot_all
